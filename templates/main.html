<!DOCTYPE html>
<html lang="en">
	<head>
		<link rel="stylesheet" href="{{ url_for('static',filename='styles/a.css') }}">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
		<script>
			function logout() {
				fetch("{{ url_for('logout') }}").then(()=>{
					window.location = "/"
				})
			}
			$(document).ready(()=>{
				setInterval(()=>{
					document.getElementById("current_time").innerHTML = "Current time: " + new Date().toLocaleTimeString();
				}, 1000);
				$.get("/fetch_session_login_time", (data)=>{
					document.getElementById("current_login").innerHTML = "Current session login time: " + data
				})
			})
		</script>
		{% if text %}
		<script src="{{ url_for('static',filename='scripts/main_material.js') }}" type="text/javascript"></script>
		{% else %}
		<script src="{{ url_for('static',filename='scripts/main_calendar.js') }}" type="text/javascript"></script>
		{% endif %}
	</head>
	<body>
		<div id="top_banner">
			<div id="title_container">
				<div class="title_text">
					Welcome!
				</div>
				<button class="logout", onclick="logout()">Logout</button>
			</div>
		</div>
		<br>
		<div id="main_content">
			<div id="upcoming_message">
				Welcome {{name}}! <br>
				{% if text %}
				In the upcoming hour, you have the following activities:
				{% else %}
				You have no upcoming event within an hour.
				{% endif %}
			</div>
			<div id="upcoming_content">
				{% if text %}
				<span id="message_text">{{ text|safe }}</span>
				{% else %}
				<span id="message_text">Below is your personal timetable</span>
				<table id="class_table" class="class_table" border="2">
					<tr>
						<td align="center" width="100">
							Time
						</td>
						<td align="center" width="100">
							Monday
						</td>
						<td align="center" width="100">
							Tuesday
						</td>
						<td align="center" width="100">
							Wednesday
						</td>
						<td align="center" width="100">
							Thursday
						</td>
						<td align="center" width="100">
							Friday
						</td>
						<td align="center" width="100">
							Saturday
						</td>
						<td align="center" width="100">
							Sunday
						</td>
					</tr>
					{% for i in range(8, 18) %}
						<tr>
							<td align="center" width="100" rowspan="1">
								{{ i }}:30 - {{ i + 1}}:20
							</td>
							<td align="center" width="100" id={{i}}_0>
								&nbsp<br>&nbsp
							</td>
							<td align="center" width="100" id={{i}}_1>
								&nbsp<br>&nbsp
							</td>
							<td align="center" width="100" id={{i}}_2>
								&nbsp<br>&nbsp
							</td>
							<td align="center" width="100" id={{i}}_3>
								&nbsp<br>&nbsp
							</td>
							<td align="center" width="100" id={{i}}_4>
								&nbsp<br>&nbsp
							</td>
							<td align="center" width="100" id={{i}}_5>
								&nbsp<br>&nbsp
							</td>
							<td align="center" width="100" id={{i}}_6>
								&nbsp<br>&nbsp
							</td>
						</tr>
					{% endfor %}
				</table>
				{% endif %}
			</div>
		</div>
		<div id="option_menu"></div>
		<div id="bottom_menu">
			<div id="latest_behaviour" class="bottom_item">Last login time: {{ login_history }} </div>
			<div id="current_login" class="bottom_item"></div>
			<div id="current_time" class="bottom_item"></div>

		</div>

	</body>
</html>
